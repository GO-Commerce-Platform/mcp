# GO-Commerce MCP Test Configuration
# This configuration is specifically for testing tenant resolution functionality

# Application settings for testing
quarkus.application.name=mcp-server-test
quarkus.http.port=0

# Test Database Configuration  
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.username=test_user
%test.quarkus.datasource.password=test_password
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/mcp_test_db
%test.quarkus.datasource.jdbc.max-size=20
%test.quarkus.datasource.jdbc.min-size=2

# Hibernate ORM Configuration for Testing
%test.quarkus.hibernate-orm.multitenant=SCHEMA
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.sql-load-script=import-test.sql
%test.quarkus.hibernate-orm.log.sql=false
%test.quarkus.hibernate-orm.show-sql=false
%test.quarkus.hibernate-orm.validate-in-dev-mode=false

# Transaction configuration for tests
%test.quarkus.transaction-manager.enable-recovery=false

# Health checks for testing
%test.quarkus.smallrye-health.ui.enable=false

# Metrics configuration for testing
%test.quarkus.micrometer.export.prometheus.enabled=false

# OpenAPI disabled in tests to reduce noise
%test.quarkus.smallrye-openapi.enable=false

# Security Configuration for Testing (Embedded Security)
%test.quarkus.security.users.embedded.enabled=true
%test.quarkus.security.users.embedded.plain-text=true
%test.quarkus.security.users.embedded.users.testadmin=testpass
%test.quarkus.security.users.embedded.roles.testadmin=mcp-client,store-admin
%test.quarkus.security.users.embedded.users.testuser=testpass
%test.quarkus.security.users.embedded.roles.testuser=mcp-client,store-analyst
%test.quarkus.security.users.embedded.users.testviewer=testpass
%test.quarkus.security.users.embedded.roles.testviewer=store-viewer

# Logging Configuration for Testing
%test.quarkus.log.level=INFO
%test.quarkus.log.category."dev.tiodati.saas.gocommerce.mcp.tenant".level=DEBUG
%test.quarkus.log.category."dev.tiodati.saas.gocommerce.mcp.config".level=DEBUG
%test.quarkus.log.category."org.hibernate.SQL".level=WARN
%test.quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=WARN

# Test-specific tenant configuration
test.tenant.default.schema=mcp
test.tenant.prefix=store_
test.tenant.test-tenants=acme_corp,test_store,simple_tenant

# Redis configuration for caching tests (if Redis is available)
%test.quarkus.redis.hosts=redis://localhost:6379
%test.quarkus.redis.timeout=2s

# DevServices configuration for testing
%test.quarkus.devservices.enabled=true
%test.quarkus.datasource.devservices.enabled=true
%test.quarkus.datasource.devservices.image-name=postgres:15-alpine
%test.quarkus.datasource.devservices.db-name=mcp_test_db
%test.quarkus.datasource.devservices.username=test_user
%test.quarkus.datasource.devservices.password=test_password

# Container configuration for integration tests
%test.quarkus.container-image.build=false

# Test timeouts and performance
%test.quarkus.test.timeout=120s

# Additional logging for debugging tenant resolution
%test.quarkus.log.category."org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl".level=DEBUG
%test.quarkus.log.category."org.hibernate.context.internal.ThreadLocalSessionContext".level=DEBUG

# Copilot: This file may have been generated or refactored by GitHub Copilot.
